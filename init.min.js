window.Promise=function(){function f(d,g,h){this.__value=void 0;this.__resolve=g?g:[];this.__reject=h?h:[];this.__finished=this.__rejected=this.__fulfilled=!1;this.__base=void 0;this.resolve=function(b){var c=this.__resolve.splice(0,1)[0];this.__fulfilled=!0;b&&(this.__value=b);if(c){try{var a=this.base?c.call(this.base,this.__value):c(this.__value)}catch(e){return this.reject(e),console.error("Rejection Error in Promise on",e.stacktrace)}a instanceof f?(a.__resolve=a.__resolve.concat(this.__resolve),
a.__reject=a.__reject.concat(this.__reject),(a.__fulfilled||a.__finished)&&a.resolve(a.__value)):this.resolve(a)}else this.__rejected||(this.__finished=!0)}.bind(this);this.reject=function(b){var c=this.__reject.splice(0,1)[0];this.__rejected=this.__fulfilled=!0;b&&(this.__value=b);if(c){try{var a=this.base?c.call(this.base,this.__value):c(this.__value)}catch(e){return this.reject(e),console.error("Rejection Error in Promise on",e.stacktrace)}this.reject(a)}else this.__finished=!0}.bind(this);try{this.__control=
d(this.resolve,this.reject)}catch(b){this.reject(b),console.error("Rejection Error in Promise on",b.stacktrace)}}f.prototype.then=function(d){this.__resolve.push(d);this.__fulfilled&&this.__finished&&!this.__rejected&&this.resolve();return this};f.prototype.catch=function(d){this.__reject.push(d);this.__fulfilled&&this.__finished&&this.__rejected&&this.reject();return this};return f}();