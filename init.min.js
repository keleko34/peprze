window.Promise=function(){function e(b,f,g){this.__value=[void 0];this.__resolve=f?f:[];this.__reject=g?g:[];this.__finished=this.__rejected=this.__fulfilled=!1;this.__base=void 0;this.resolve=function(c){var b=this.__resolve.splice(0,1)[0];this.__fulfilled=!0;c&&(this.__value[0]=c);if(b){try{var a=b.apply(this.base||this,this.__value)}catch(d){return this.reject(d),console.error("Rejection Error in Promise on",d.stacktrace)}a instanceof e?(a.__resolve=a.__resolve.concat(this.__resolve),a.__reject=
a.__reject.concat(this.__reject),a.__value=a.__value.concat(this.__value),this.__resolve=[],this.__reject=[],this.__value=[void 0],this.__finished=!0,(a.__fulfilled||a.__finished)&&a.resolve.apply(a.base||a,a.__value)):this.resolve(a)}else this.__rejected||(this.__finished=!0)}.bind(this);this.reject=function(b){var c=this.__reject.splice(0,1)[0];this.__rejected=this.__fulfilled=!0;b&&(this.__value[0]=b);if(c){try{var a=c.apply(this.base||this,this.__value)}catch(d){return this.reject(d),console.error("Rejection Error in Promise on",
d.stacktrace)}this.reject(a)}else this.__finished=!0}.bind(this);try{this.__control=b(this.resolve,this.reject)}catch(c){this.reject(c),console.error("Rejection Error in Promise on",c.stacktrace)}}e.prototype.then=function(b){this.__resolve.push(b);this.__fulfilled&&this.__finished&&!this.__rejected&&this.resolve();return this};e.prototype.catch=function(b){this.__reject.push(b);this.__fulfilled&&this.__finished&&this.__rejected&&this.reject();return this};return e}();